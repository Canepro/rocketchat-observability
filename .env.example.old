# Example environment file for Rocket.Chat Observability stack
#
# ⚠️ WARNING: Never commit your real .env file to version control or share it publicly!
# Customize these values to your environment. Comments indicate typical local development defaults.

#########################
# Core Application Settings
#########################

# Rocket.Chat Cloud registration token (optional)
REG_TOKEN=

# Traefik protocol: http or https
TRAEFIK_PROTOCOL=http

# Enable Let's Encrypt (only meaningful when TRAEFIK_PROTOCOL=https)
LETSENCRYPT_ENABLED=
LETSENCRYPT_EMAIL=

# Domain for Rocket.Chat (used in Traefik routing)
DOMAIN=localhost

# Grafana exposure:
# Use path (recommended for demos) OR subdomain (for prod). Leave one empty.
GRAFANA_DOMAIN=
GRAFANA_PATH=/grafana

# Rocket.Chat external URL (align with how you access it)
ROOT_URL=http://localhost

# Grafana admin credentials (default used by provisioning)
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=rc-admin

# Images (centralized)
PROMETHEUS_IMAGE=prom/prometheus:v2.54.1
GRAFANA_IMAGE=grafana/grafana:11.3.0
NATS_EXPORTER_IMAGE=natsio/prometheus-nats-exporter:0.14.0

# Demo bind hosts (ephemeral ports)
TRAEFIK_HTTP_BIND_HOST=127.0.0.1
TRAEFIK_HTTPS_BIND_HOST=127.0.0.1

# Prod bind hosts/ports
TRAEFIK_HTTP_PORT=80
TRAEFIK_HTTPS_PORT=443
TRAEFIK_HTTP_BIND_HOST=0.0.0.0
TRAEFIK_HTTPS_BIND_HOST=0.0.0.0

#########################
# Container Images
#########################

ROCKETCHAT_IMAGE=registry.rocket.chat/rocketchat/rocket.chat:${RELEASE}
MONGO_IMAGE=bitnami/mongodb:6.0
GRAFANA_IMAGE=grafana/grafana:12.0.2
PROMETHEUS_IMAGE=prom/prometheus:v3.4.2
TRAEFIK_IMAGE=traefik:v3.4
MONGODB_EXPORTER_IMAGE=percona/mongodb_exporter:0.44.0
NODE_EXPORTER_IMAGE=prom/node-exporter:v1.9.1
NATS_IMAGE=nats:2.11-alpine
NATS_EXPORTER_IMAGE=bitnami/nats-exporter:0.17.3

#########################
# Traefik / TLS Configuration
#########################

# Use true to enable automatic Let's Encrypt certs (requires valid DNS + public port 80/443)
LETSENCRYPT_ENABLED=false
LETSENCRYPT_EMAIL=demo@email.com

# Protocol Traefik serves (http or https)
TRAEFIK_PROTOCOL=http

# Ports Traefik listens on (host machine)
TRAEFIK_HTTP_PORT=80
TRAEFIK_HTTPS_PORT=443
TRAEFIK_DASHBOARD_PORT=8080

# Expose the Traefik dashboard without auth (for local dev only)
TRAEFIK_API_INSECURE=false

#########################
# Rocket.Chat Ports
#########################

# Internal port Rocket.Chat listens on
HOST_PORT=3000

# Metrics port for Rocket.Chat Prometheus exporter
METRICS_PORT=9458

#########################
# MongoDB Settings
#########################

MONGODB_BIND_IP=127.0.0.1
MONGODB_PORT_NUMBER=27017
MONGODB_REPLICA_SET_NAME=rs0

#########################
# Prometheus Settings
#########################

PROMETHEUS_PORT=9000
PROMETHEUS_RETENTION_SIZE=15GB
PROMETHEUS_RETENTION_TIME=15d
PROMETHEUS_LISTEN_ADDR=127.0.0.1

#########################
# Grafana Settings
#########################

# For path-based access (e.g. http://localhost/grafana), set GRAFANA_DOMAIN=localhost and GRAFANA_PATH=/grafana
# For subdomain-based access (e.g. http://grafana.localhost), set GRAFANA_DOMAIN=grafana.localhost and leave GRAFANA_PATH blank
GRAFANA_DOMAIN=grafana.localhost
GRAFANA_PATH=
GRAFANA_HOST_PORT=5050
GRAFANA_ADMIN_PASSWORD=Password123

#########################
# NATS Settings
#########################

# NATS server connection string
NATS_URL=nats://nats:4222

#########################
# Bind Settings
#########################

# Bind all container service ports to this IP on the host (127.0.0.1 for local only)
BIND_IP=127.0.0.1